<div class="modal-overlay" (click)="close()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <span class="close-btn" (click)="close()">&times;</span>
        <h2>Update Product</h2>
        <form id="newproductform" (ngSubmit)="onSubmit()">
            <div class="form-grid">
                <!-- Product Name -->
                <div class="input-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" name="name" [(ngModel)]="name" required [placeholder]= "product?.name">
                </div>

                <!-- Product Description -->
                <div class="input-group">
                    <label for="description">Description</label>
                    <input type="text" id="description" name="description" [(ngModel)]="description" required [placeholder]= "product?.description">
                </div>

                <!-- Product Brand -->
                <div class="input-group">
                    <label for="brand">Brand</label>
                    <select id="brand" name="brand" [(ngModel)]="brand" required>
                        <option value="" disabled selected hidden>
                        {{ product?.brandName }}
                        </option>
                        <option *ngFor="let brand of brands" [value]="brand.name">{{ brand.name }}</option>
                    </select>
                </div>

                <div class="input-group">
                  <label for="category">Categoria</label>
                  <select id="category" name="category" [(ngModel)]="category" required>
                    <option value="" disabled selected hidden>
                      {{ product?.categoryName }}
                    </option>
                    <option *ngFor="let category of categories" [value]="category.name">{{ category.name }}</option>
                  </select>
                </div>

                <!-- Product Image URL -->
                <div class="input-group full-width">
                    <label for="imageUrl">Image URL</label>
                    <input type="text" id="imageUrl" name="imageUrl" [(ngModel)]="imageUrl">
                    <button type="button" class="add-url-btn" (click)="addImageUrl()">Add Image URL</button>
                </div>

                <!-- Image Preview -->
                <div class="input-group full-width">
                    <label>Image Preview</label>
                    <div class="image-preview">
                        <img *ngFor="let image of images" [src]="image.url" alt="Image preview">
                    </div>
                </div>

                <!-- Contorno per Size, Price, Stock e Checkbox -->
                <div *ngFor="let box of addProductSizeRequestBoxes; let i = index" class="input-group bordered-box">
                    <div class="input-group three-columns">
                        <div class="input-group">
                            <label for="sizeValue-{{i}}">Size</label>
                            <select id="sizeValue-{{i}}" name="sizeValue-{{i}}" [(ngModel)]="box.sizeValue" required>
                                <option *ngFor="let size of sizes" [value]="size.sizeValue">{{ size.sizeValue }}
                                </option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="price-{{i}}">Price</label>
                            <input type="number" id="price-{{i}}" name="price-{{i}}" [(ngModel)]="box.price" required>
                        </div>
                        <div class="input-group">
                            <label for="stock-{{i}}">Stock</label>
                            <input type="number" id="stock-{{i}}" name="stock-{{i}}" [(ngModel)]="box.stock" required>
                        </div>
                    </div>

                    <!-- Checkbox for express, hide, and OoS -->
                    <div class="input-group three-columns">
                        <div class="input-group checkbox-group">
                            <label for="express-{{i}}">Express</label>
                            <input type="checkbox" id="express-{{i}}" name="express-{{i}}" [(ngModel)]="box.express">
                        </div>
                        <div class="input-group checkbox-group">
                            <label for="hide-{{i}}">Hide</label>
                            <input type="checkbox" id="hide-{{i}}" name="hide-{{i}}" [(ngModel)]="box.hide">
                        </div>
                    </div>
                </div>

                <!-- Simbolo + premibile -->
                <div class="input-group plus-button-container">
                    <button type="button" class="plus-button" (click)="addNewItem()">+</button>
                    <button type="button" class="minus-button" (click)="removeLastItem()">-</button>
                </div>


            </div>

            <!-- Submit Button -->
            <button type="submit" class="submit-btn center-btn">Save Product</button>
        </form>
    </div>
</div>